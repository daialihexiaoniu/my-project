<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Destructuring</title>
</head>
<body>
    <script>
        // // 1
        // let [a, b, c] = [1, 2, 3];
        // console.log("a--->", a);
        // console.log("b--->", b);
        // console.log("c--->", c);

        // // 2
        // let [foo, [[bar], baz]] = [1, [[2], 3]];
        // console.log('foo--->', foo) 
        // console.log('bar--->', bar) 
        // console.log('baz--->', baz)

        // let [ , , third] = ["foo", "bar", "baz"];
        // console.log("third--->", third)

        // let [x, , y] = [1, 2, 3];
        // console.log('x--->', x)
        // console.log('y--->', y)

        // let [head, ...tail] = [1, 2, 3, 4];
        // console.log('head--->', head)
        // console.log('tail--->', tail)

        // let [x, y, ...z] = ['a'];
        // console.log('x--->', x)
        // console.log('y--->', y)
        // console.log('z--->', z)

        // 解构不成功
        // let [foo] = [];
        // console.log("foo-->", foo)

        // let [bar, foo] = [1];
        // console.log("bar-->", bar)
        // console.log("foo-->", foo)

        // let [x, y] = [1, 2, 3];
        // console.log("x--->", x)
        // console.log("y--->", y)

        // let [a, [b], d] = [1, [2, 3], 4];
        // console.log("a--->", a)
        // console.log("b--->", b)
        // console.log("d--->", d)

        // let [foo] = 1;
        // let [foo] = false;
        // let [foo] = NaN;
        // let [foo] = undefined;
        // let [foo] = null;
        // let [foo] = {};
        
        // foo // true
        // let [foo = true] = [];
        // console.log("foo--->", foo)

        // let [x, y = 'b'] = ['a']; 
        // console.log("x--->", x)
        // console.log("y--->", y)

        // let [x, y = 'b'] = ['a', undefined]; 
        // console.log("x--->", x)
        // console.log("y--->", y)

        // let [x = 1] = [null];
        // console.log("x--->", x)

        // function f() {
        //     console.log('aaa');
        // }

        // let [x = f()] = [1];
        // console.log("x--->", x)

        // let [x = 1, y = x] = [];     
        // console.log("x--->", x)
        // console.log("y--->", y)

        // let [x = 1, y = x] = [2];  
        // console.log("x--->", x)
        // console.log("y--->", y)

        // let [x = 1, y = x] = [1, 2]; 
        // console.log("x--->", x)
        // console.log("y--->", y)

        // let [x = y, y = 1] = [];     
        // console.log("x--->", x)
        // console.log("y--->", y)

        // 对象解构
        // let { foo, bar } = { foo: "aaa", bar: "bbb" };
        // console.log("foo--->", foo)
        // console.log("bar--->", bar)
        
        // let { bar, foo } = { foo: "aaa", bar: "bbb" };
        // console.log("foo--->", foo)
        // console.log("bar--->", bar)

        // let { baz } = { foo: "aaa", bar: "bbb" };
        // console.log("baz--->", baz)

        // let { foo: baz } = { foo: 'aaa', bar: 'bbb' };
        // console.log("baz--->", baz)

        // let obj = { first: 'hello', last: 'world' };
        // let { first: f, last: l } = obj;
        // console.log("f--->", f)
        // console.log("l--->", l)

        // let { foo: foo, bar: bar } = { foo: "aaa", bar: "bbb" };

        // let obj = {
        // p: [
        //     'Hello',
        //     { y: 'World' }
        // ]
        // };

        // let { p: [x, { y }] } = obj;
        // console.log("x--->", x)
        // console.log("y--->", y)

        // let { p, p: [x, { y }] } = obj;
        // console.log("p--->", p)
        // console.log("x--->", x)
        // console.log("y--->", y)

        // const node = {
        // loc: {
        //     start: {
        //     line: 1,
        //     column: 5
        //     }
        // }
        // };

        // let { loc, loc: { start }, loc: { start: { line }} } = node;
        // console.log("line--->", line) 
        // console.log("loc--->", loc) 
        // console.log("start--->", start)

        // // 嵌套复制
        // let obj = {};
        // let arr = [];

        // ({ foo: obj.prop, bar: arr[0] } = { foo: 123, bar: true });

        // console.log("obj--->", obj) 
        // console.log("arr--->", arr) 


        // 对象解构默认值
        // var {x = 3} = {};
        // console.log('x--->', x)

        // var {x, y = 5} = {x: 1};
        // console.log('x--->', x)
        // console.log('y--->', y)

        // var {x: y = 3} = {};
        // console.log('y--->', y)

        // var {x: y = 3} = {x: 5};
        // console.log('y--->', y)

        // var { message: msg = 'Something went wrong' } = {};
        // console.log('msg--->', msg)

        // 解构失败
        // let {foo} = {bar: 'baz'};
        // let {foo: {bar}} = {baz: 'baz'};

        // let x;
        // {x} = {x: 1};
        // ({x} = {x: 1});

        // 上面代码的写法会报错，因为 JavaScript 引擎会将{x}理解成一个代码块，从而发生语法错误。只有不将大括号写在行首，避免 JavaScript 将其解释为代码块，才能解决这个问题。

        // let { log, sin, cos } = Math;

        // 由于数组本质是特殊的对象，因此可以对数组进行对象属性的解构。
        // let arr = [1, 2, 3];
        // let {0 : first, [arr.length - 1] : last} = arr;
        // console.log('first-->', first)
        // console.log('last-->', last)


        // 字符串解耦
        // const [a, b, c, d, e] = 'hello';
        // console.log('a--->', a)
        // console.log('b--->', b)
        // console.log('c--->', c)
        // console.log('d--->', d)
        // console.log('e--->', e)

        // 类似数组的对象都有一个length属性，因此还可以对这个属性解构赋值。
        // let {length : len} = 'hello';
        // console.log('len--->', len)


        // 数值和布尔值的解构赋值
        // let {toString: s} = 123;

        // let {toString: s} = true;

        // function add([x, y]){
        //     return x + y;
        // }

        // console.log(add([1, 2]));
        // console.log(add([3, 10]));

        // let test = [[1, 2], [3, 4]].map(([a, b]) => a + b);
        // console.log(test)

        // 函数解构默认值
        // function move({x = 0, y = 0} = {}) {
        // return [x, y];
        // }

        // 这边解构是({x = 0, y = 0} = {})
        // console.log(move({x: 3, y: 8})); 
        // console.log(move({x: 3})); 
        // console.log(move({})); 
        // console.log(move()); 

        // function move({x, y} = { x: 0, y: 0 }) {
        // return [x, y];
        // }
        
        // 这边解构是({x, y} = { x: 0, y: 0 })
        // console.log(move({x: 3, y: 8})); 
        // console.log(move({x: 3})); 
        // console.log(move({})); 
        // console.log(move());

        // 解构用途
        // 交换变量的值
        // let x = 1;
        // let y = 2;

        // [x, y] = [y, x];

        // // 从函数返回多个值
        // // 返回一个数组

        // function example() {
        //     return [1, 2, 3];
        // }
        // let [a, b, c] = example();

        // // 返回一个对象

        // function example() {
        // return {
        //     foo: 1,
        //     bar: 2
        // };
        // }
        // let { foo, bar } = example();

        // // 函数参数的定义
        // // 参数是一组有次序的值
        // function f([x, y, z]) {  }
        // f([1, 2, 3]);

        // // 参数是一组无次序的值
        // function f({x, y, z}) {  }
        // f({z: 3, y: 2, x: 1});

        // // 提取 JSON 数据
        // let jsonData = {
        //     id: 42,
        //     status: "OK",
        //     data: [867, 5309]
        // };

        // let { id, status, data: number } = jsonData;

        // console.log(id, status, number);

        // // 函数参数的默认值
        // // 避免了在函数体内部再写var foo = config.foo || 'default foo';这样的语句。
        // jQuery.ajax = function (url, {
        //     async = true,
        //     beforeSend = function () {},
        //     cache = true,
        //     complete = function () {},
        //     crossDomain = false,
        //     global = true,
        //     // ... more config
        // } = {}) {
        //     // ... do stuff
        // };

        // // 遍历 Map 结构
        // const map = new Map();
        // map.set('first', 'hello');
        // map.set('second', 'world');

        // for (let [key, value] of map) {
        //     console.log(key + " is " + value);
        // }

        // // 获取键名
        // for (let [key] of map) {
        //     // ...
        // }

        // // 获取键值
        // for (let [,value] of map) {
        //     // ...
        // }

        // // 输入模块的指定方法
        // const { SourceMapConsumer, SourceNode } = require("source-map");
    </script>
</body>
</html>